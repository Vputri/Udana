{"ast":null,"code":"var _jsxFileName = \"/home/vika/Documents/blog-strapi/frontend/src/queries/article/articles.js\",\n    _s = $RefreshSig$();\n\nimport { useHistory } from 'react-router';\nimport { gql, useQuery } from '@apollo/client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LINKS_PER_PAGE = 2;\nconst ARTICLES_QUERY = gql`\n  query Articles(\n    $take: Int\n    $skip: Int){\n    articles(take: $take, skip: $skip){\n      slug\n      title\n      content\n      description\n      author{\n        name\n      }\n      category {\n        slug\n        name\n      }\n      image {\n        url\n      }\n    }\n  }\n`;\n\nconst Link = props => {\n  const {\n    link\n  } = props;\n  const take = LINKS_PER_PAGE;\n  const skip = 0;\n};\n\n_c = Link;\n\nconst getLinksToRender = (isNewPage, data) => {\n  if (isNewPage) {\n    return data.feed.links;\n  }\n\n  const rankedLinks = data.feed.links.slice();\n  rankedLinks.sort((l1, l2) => l2.votes.length - l1.votes.length);\n  return rankedLinks;\n};\n\nconst getQueryVariables = (isNewPage, page) => {\n  const skip = isNewPage ? (page - 1) * LINKS_PER_PAGE : 0;\n  const take = isNewPage ? LINKS_PER_PAGE : 100;\n  return {\n    take,\n    skip\n  };\n};\n\nconst LinkList = () => {\n  _s();\n\n  const history = useHistory();\n  const isNewPage = history.location.pathname.includes('new');\n  const pageIndexParams = history.location.pathname.split('/');\n  const page = parseInt(pageIndexParams[pageIndexParams.length - 1]);\n  const pageIndex = page ? (page - 1) * LINKS_PER_PAGE : 0;\n  const {\n    data,\n    loading,\n    error,\n    subscribeToMore\n  } = useQuery(ARTICLES_QUERY, {\n    variables: getQueryVariables(isNewPage, page)\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: JSON.stringify(error, null, 2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }, this), data && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [getLinksToRender(isNewPage, data).map((link, index) => /*#__PURE__*/_jsxDEV(Link, {\n        link: link,\n        index: index + pageIndex\n      }, link.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }, this)), isNewPage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex ml4 mv3 gray\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pointer mr2\",\n          onClick: () => {\n            if (page > 1) {\n              history.push(`/${page - 1}`);\n            }\n          },\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pointer\",\n          onClick: () => {\n            if (page <= data.feed.count / LINKS_PER_PAGE) {\n              const nextPage = page + 1;\n              history.push(`/${nextPage}`);\n            }\n          },\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(LinkList, \"uZ+VzZ/K/WIzLe4+uXI1/G8CEvs=\", false, function () {\n  return [useHistory, useQuery];\n});\n\n_c2 = LinkList;\nexport default ARTICLES_QUERY;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Link\");\n$RefreshReg$(_c2, \"LinkList\");","map":{"version":3,"sources":["/home/vika/Documents/blog-strapi/frontend/src/queries/article/articles.js"],"names":["useHistory","gql","useQuery","LINKS_PER_PAGE","ARTICLES_QUERY","Link","props","link","take","skip","getLinksToRender","isNewPage","data","feed","links","rankedLinks","slice","sort","l1","l2","votes","length","getQueryVariables","page","LinkList","history","location","pathname","includes","pageIndexParams","split","parseInt","pageIndex","loading","error","subscribeToMore","variables","JSON","stringify","map","index","id","push","count","nextPage"],"mappings":"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","sourcesContent":["import { useHistory } from 'react-router';\nimport { gql, useQuery } from '@apollo/client';\n\nconst LINKS_PER_PAGE = 2;\nconst ARTICLES_QUERY = gql`\n  query Articles(\n    $take: Int\n    $skip: Int){\n    articles(take: $take, skip: $skip){\n      slug\n      title\n      content\n      description\n      author{\n        name\n      }\n      category {\n        slug\n        name\n      }\n      image {\n        url\n      }\n    }\n  }\n`;\n\nconst Link = (props) => {\n  const { link } = props;\n  const take = LINKS_PER_PAGE;\n  const skip = 0;\n};\n\nconst getLinksToRender = (isNewPage, data) => {\n  if (isNewPage) {\n    return data.feed.links;\n  }\n  const rankedLinks = data.feed.links.slice();\n  rankedLinks.sort(\n    (l1, l2) => l2.votes.length - l1.votes.length\n  );\n  return rankedLinks;\n};\n\nconst getQueryVariables = (isNewPage, page) => {\n  const skip = isNewPage ? (page - 1) * LINKS_PER_PAGE : 0;\n  const take = isNewPage ? LINKS_PER_PAGE : 100;\n  return { take, skip};\n};\n\nconst LinkList = () => {\n  const history = useHistory();\n  const isNewPage = history.location.pathname.includes(\n    'new'\n  );\n  const pageIndexParams = history.location.pathname.split(\n    '/'\n  );\n  const page = parseInt(\n    pageIndexParams[pageIndexParams.length - 1]\n  );\n\n  const pageIndex = page ? (page - 1) * LINKS_PER_PAGE : 0;\n\n  const {\n    data,\n    loading,\n    error,\n    subscribeToMore\n  } = useQuery(ARTICLES_QUERY, {\n    variables: getQueryVariables(isNewPage, page)\n  });\n\n  return (\n    <>\n      {loading && <p>Loading...</p>}\n      {error && <pre>{JSON.stringify(error, null, 2)}</pre>}\n      {data && (\n        <>\n          {getLinksToRender(isNewPage, data).map(\n            (link, index) => (\n              <Link\n                key={link.id}\n                link={link}\n                index={index + pageIndex}\n              />\n            )\n          )}\n          {isNewPage && (\n            <div className=\"flex ml4 mv3 gray\">\n              <div\n                className=\"pointer mr2\"\n                onClick={() => {\n                  if (page > 1) {\n                    history.push(`/${page - 1}`);\n                  }\n                }}\n              >\n                Previous\n              </div>\n              <div\n                className=\"pointer\"\n                onClick={() => {\n                  if (\n                    page <=\n                    data.feed.count / LINKS_PER_PAGE\n                  ) {\n                    const nextPage = page + 1;\n                    history.push(`/${nextPage}`);\n                  }\n                }}\n              >\n                Next\n              </div>\n            </div>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default ARTICLES_QUERY;"]},"metadata":{},"sourceType":"module"}